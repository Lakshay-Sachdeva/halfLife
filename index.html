<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Half Life</title>
    <link rel="stylesheet" href="./index.css" />
  </head>
  <body>
    <h1>Half Life Calculator</h1>
    <h3>
      Calculate the remaining weightof radioactive element left after number of
      days under variable conditions
    </h3>
    <div id="form">
      <div class="sub">
        <label>Initial Weight</label>
        <input
          type="text"
          id="initialWeight"
          placeholder="Enter weight in grams"
        />
      </div>
      <div class="sub">
        <label>Daily Weight (if any)</label>
        <input
          type="text"
          id="dailyWeight"
          placeholder="Enter weight in array"
        />
      </div>
      <div class="sub">
        <label>Number of Days</label>
        <input
          type="text"
          id="numberOfDays"
          placeholder="Enter number of Days"
        />
      </div>
      <button id="submit" onclick="printResult()">Calulate</button>
    </div>
    <div id="result"></div>
  </body>
</html>
<script>
  function calcHalf() {
    let startWeight = document.getElementById("initialWeight").value;
    let dailyWeight = document.getElementById("dailyWeight").value;
    let nDays = document.getElementById("numberOfDays").value;
    if (startWeight !== "" && dailyWeight !== "" && nDays !== "") {
      dailyWeight = dailyWeight.trim().split(" ").map(Number);
      return calculate(startWeight, dailyWeight, nDays);
    } else {
      alert("Please enter valid values");
    }
  }

  const calculate = (sw, dw, days) => {
    let weight = sw;
    for (let i = 0; i < days; i++) {
      weight = weight / 2 + dw[i % dw.length];
    }
    return weight;
  };

  const printResult = () => {
    let result = calcHalf();

    let resultDiv = document.getElementById("result");
    resultDiv.innerText = `Resultant weight after decay of ${
      document.getElementById("numberOfDays").value
    } days is : ${result}`;
  };
</script>
